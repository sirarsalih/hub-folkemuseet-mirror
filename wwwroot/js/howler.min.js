/*!
 *  howler.js v1.1.20
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
(function(){var u={},n=null,r=!0,e=!1,f,s,t,i,h,o;try{typeof AudioContext!="undefined"?n=new AudioContext:typeof webkitAudioContext!="undefined"?n=new webkitAudioContext:r=!1}catch(v){r=!1}if(!r)if(typeof Audio!="undefined")try{new Audio}catch(v){e=!0}else e=!0;if(r&&(f=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),f.gain.value=1,f.connect(n.destination)),s=function(){this._volume=1;this._muted=!1;this.usingWebAudio=r;this.noAudio=e;this._howls=[]},s.prototype={volume:function(n){var t=this,i,u;if(n=parseFloat(n),n>=0&&n<=1){t._volume=n;r&&(f.gain.value=n);for(i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(u=0;u<t._howls[i]._audioNode.length;u++)t._howls[i]._audioNode[u].volume=t._howls[i]._volume*t._volume;return t}return r?f.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(n){var t=this,i,u;t._muted=n;r&&(f.gain.value=n?0:t._volume);for(i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(u=0;u<t._howls[i]._audioNode.length;u++)t._howls[i]._audioNode[u].muted=n}},t=new s,i=null,e||(i=new Audio,h={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}),o=function(n){var i=this;i._autoplay=n.autoplay||!1;i._buffer=n.buffer||!1;i._duration=n.duration||0;i._format=n.format||null;i._loop=n.loop||!1;i._loaded=!1;i._sprite=n.sprite||{};i._src=n.src||"";i._pos3d=n.pos3d||[0,0,-.5];i._volume=n.volume!==undefined?n.volume:1;i._urls=n.urls||[];i._rate=n.rate||1;i._model=n.model||null;i._onload=[n.onload||function(){}];i._onloaderror=[n.onloaderror||function(){}];i._onend=[n.onend||function(){}];i._onpause=[n.onpause||function(){}];i._onplay=[n.onplay||function(){}];i._onendTimer=[];i._webAudio=r&&!i._buffer;i._audioNode=[];i._webAudio&&i._setupAudioNode();t._howls.push(i);i.load()},o.prototype={load:function(){var n=this,f=null,o,r,c,i,a;if(e){n.on("loaderror");return}for(o=0;o<n._urls.length;o++){if(n._format)r=n._format;else if(c=n._urls[o].toLowerCase().split("?")[0],r=c.match(/.+\.([^?]+)(\?|$)/),r=r&&r.length>=2?r:c.match(/data\:audio\/([^?]+);/),r)r=r[1];else{n.on("loaderror");return}if(h[r]){f=n._urls[o];break}}if(!f){n.on("loaderror");return}return n._src=f,n._webAudio?l(n,f):(i=new Audio,i.addEventListener("error",function(){i.error&&i.error.code===4&&(s.noAudio=!0);n.on("loaderror",{type:i.error?i.error.code:0})},!1),n._audioNode.push(i),i.src=f,i._pos=0,i.preload="auto",i.volume=t._muted?0:n._volume*t.volume(),u[f]=n,a=function(){if(n._duration=Math.ceil(i.duration*10)/10,Object.getOwnPropertyNames(n._sprite).length===0&&(n._sprite={_default:[0,n._duration*1e3]}),!n._loaded){n._loaded=!0;n.on("load")}n._autoplay&&n.play();i.removeEventListener("canplaythrough",a,!1)},i.addEventListener("canplaythrough",a,!1),i.load()),n},urls:function(n){var t=this;return n?(t.stop(),t._urls=typeof n=="string"?[n]:n,t._loaded=!1,t.load(),t):t._urls},play:function(i,r){var u=this;if(typeof i=="function"&&(r=i),i&&typeof i!="function"||(i="_default"),!u._loaded){u.on("load",function(){u.play(i,r)});return u}return u._sprite[i]?(u._inactiveNode(function(f){var l,v;f._sprite=i;var s=f._pos>0?f._pos:u._sprite[i][0]/1e3,h=u._sprite[i][1]/1e3-f._pos,o=!!(u._loop||u._sprite[i][2]),e=typeof r=="string"?r:Math.round(Date.now()*Math.random())+"",c;if(function(){var n={id:e,sprite:i,loop:o};c=setTimeout(function(){!u._webAudio&&o&&u.stop(n.id).play(i,n.id);u._webAudio&&!o&&(u._nodeById(n.id).paused=!0,u._nodeById(n.id)._pos=0);u._webAudio||o||u.stop(n.id);u.on("end",e)},h*1e3);u._onendTimer.push({timer:c,id:n.id})}(),u._webAudio){if(l=u._sprite[i][0]/1e3,v=u._sprite[i][1]/1e3,f.id=e,f.paused=!1,a(u,[o,l,v],e),u._playStart=n.currentTime,f.gain.value=u._volume,typeof f.bufferSource=="undefined")return;typeof f.bufferSource.start=="undefined"?f.bufferSource.noteGrainOn(0,s,h):f.bufferSource.start(0,s,h)}else if(f.readyState===4||!f.readyState&&navigator.isCocoonJS)f.readyState=4,f.id=e,f.currentTime=s,f.muted=t._muted||f.muted,f.volume=u._volume*t.volume(),setTimeout(function(){f.play()},0);else return u._clearEndTimer(e),function(){var e=u,o=i,s=r,n=f,t=function(){e.play(o,s);n.removeEventListener("canplaythrough",t,!1)};n.addEventListener("canplaythrough",t,!1)}(),u;u.on("play");return typeof r=="function"&&r(e),u}),u):(typeof r=="function"&&r(),u)},pause:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.pause(n)});return t}if(t._clearEndTimer(n),i=n?t._nodeById(n):t._activeNode(),i)if(i._pos=t.pos(null,n),t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0;typeof i.bufferSource.stop=="undefined"?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();t.on("pause");return t},stop:function(n){var i=this,t;if(!i._loaded){i.on("play",function(){i.stop(n)});return i}if(i._clearEndTimer(n),t=n?i._nodeById(n):i._activeNode(),t)if(t._pos=0,i._webAudio){if(!t.bufferSource||t.paused)return i;t.paused=!0;typeof t.bufferSource.stop=="undefined"?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else isNaN(t.duration)||(t.pause(),t.currentTime=0);return i},mute:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.mute(n)});return t}return i=n?t._nodeById(n):t._activeNode(),i&&(t._webAudio?i.gain.value=0:i.muted=!0),t},unmute:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.unmute(n)});return t}return i=n?t._nodeById(n):t._activeNode(),i&&(t._webAudio?i.gain.value=t._volume:i.muted=!1),t},volume:function(n,i){var r=this,u;if(n=parseFloat(n),n>=0&&n<=1){if(r._volume=n,!r._loaded){r.on("play",function(){r.volume(n,i)});return r}return u=i?r._nodeById(i):r._activeNode(),u&&(r._webAudio?u.gain.value=n:u.volume=n*t.volume()),r}return r._volume},filter:function(n,t){var i=this,r;return n=parseFloat(n),i._freq=n,r=t?i._nodeById(t):i._activeNode(),r&&i._webAudio&&(r.filter.frequency.value=n),i},loop:function(n){var t=this;return typeof n=="boolean"?(t._loop=n,t):t._loop},sprite:function(n){var t=this;return typeof n=="object"?(t._sprite=n,t):t._sprite},pos:function(t,i){var r=this,f,u;if(!r._loaded){r.on("load",function(){r.pos(t)});return typeof t=="number"?r:r._pos||0}if(t=parseFloat(t),f=i?r._nodeById(i):r._activeNode(),f)return t>=0?(r.pause(i),f._pos=t,r.play(f._sprite,i),r):r._webAudio?f._pos+(n.currentTime-r._playStart):f.currentTime;if(t>=0)return r;for(u=0;u<r._audioNode.length;u++)if(r._audioNode[u].paused&&r._audioNode[u].readyState===4)return r._webAudio?r._audioNode[u]._pos:r._audioNode[u].currentTime},pos3d:function(n,t,i,r){var u=this,f;if(t=typeof t=="undefined"||!t?0:t,i=typeof i=="undefined"||!i?-.5:i,!u._loaded){u.on("play",function(){u.pos3d(n,t,i,r)});return u}if(n>=0||n<0)u._webAudio&&(f=r?u._nodeById(r):u._activeNode(),f&&(u._pos3d=[n,t,i],f.panner.setPosition(n,t,i),f.panner.panningModel=u._model||"HRTF"));else return u._pos3d;return u},fade:function(n,t,i,r,u){var f=this,s=Math.abs(n-t),h=n>t?"down":"up",o=s/.01,c=i/o,e;if(!f._loaded){f.on("load",function(){f.fade(n,t,i,r,u)});return f}for(f.volume(n,u),e=1;e<=o;e++)(function(){var i=f._volume+(h==="up"?.01:-.01)*e,n=Math.round(1e3*i)/1e3,o=t;setTimeout(function(){f.volume(n,u);n===o&&r&&r()},c*e)})()},fadeIn:function(n,t,i){return this.volume(0).play().fade(0,n,t,i)},fadeOut:function(n,t,i,r){var u=this;return u.fade(u._volume,n,t,function(){i&&i();u.pause(r);u.on("end")},r)},_nodeById:function(n){for(var t=this,r=t._audioNode[0],i=0;i<t._audioNode.length;i++)if(t._audioNode[i].id===n){r=t._audioNode[i];break}return r},_activeNode:function(){for(var n=this,i=null,t=0;t<n._audioNode.length;t++)if(!n._audioNode[t].paused){i=n._audioNode[t];break}return n._drainPool(),i},_inactiveNode:function(n){for(var r,t=this,u=null,i=0;i<t._audioNode.length;i++)if(t._audioNode[i].paused&&t._audioNode[i].readyState===4){n(t._audioNode[i]);u=!0;break}(t._drainPool(),u)||(t._webAudio?(r=t._setupAudioNode(),n(r)):(t.load(),r=t._audioNode[t._audioNode.length-1],r.addEventListener(navigator.isCocoonJS?"canplaythrough":"loadedmetadata",function(){n(r)})))},_drainPool:function(){for(var t=this,i=0,n=0;n<t._audioNode.length;n++)t._audioNode[n].paused&&i++;for(n=t._audioNode.length-1;n>=0;n--){if(i<=5)break;t._audioNode[n].paused&&(t._webAudio&&t._audioNode[n].disconnect(0),i--,t._audioNode.splice(n,1))}},_clearEndTimer:function(n){for(var u,t=this,r=0,i=0;i<t._onendTimer.length;i++)if(t._onendTimer[i].id===n){r=i;break}u=t._onendTimer[r];u&&(clearTimeout(u.timer),t._onendTimer.splice(r,1))},_setupAudioNode:function(){var r=this,t=r._audioNode,i=r._audioNode.length;return t[i]=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),t[i].gain.value=r._volume,t[i].paused=!0,t[i]._pos=0,t[i].readyState=2,t[i].connect(f),t[i].panner=n.createPanner(),t[i].panner.panningModel=r._model||"equalpower",t[i].panner.setPosition(r._pos3d[0],r._pos3d[1],r._pos3d[2]),t[i].filter=n.createBiquadFilter(),t[i].filter.type="lowpass",t[i].filter.frequency.value=880,t[i].filter.Q.value=0,t[i].filter.gain.value=0,t[i].panner.connect(t[i].filter),t[i].filter.connect(t[i]),t[i]},on:function(n,t){var r=this,u=r["_on"+n],i;if(typeof t=="function")u.push(t);else for(i=0;i<u.length;i++)t?u[i].call(r,t):u[i].call(r);return r},off:function(n,t){for(var u=this,r=u["_on"+n],f=t.toString(),i=0;i<r.length;i++)if(f===r[i].toString()){r.splice(i,1);break}return u},unload:function(){for(var f,i=this,r=i._audioNode,n=0;n<i._audioNode.length;n++)r[n].paused||i.stop(r[n].id),i._webAudio?r[n].disconnect(0):r[n].src="";for(n=0;n<i._onendTimer.length;n++)clearTimeout(i._onendTimer[n].timer);f=t._howls.indexOf(i);f!==null&&f>=0&&t._howls.splice(f,1);delete u[i._src];i=null}},r)var l=function(t,i){if(i in u)t._duration=u[i].duration,c(t);else{var r=new XMLHttpRequest;r.open("GET",i,!0);r.responseType="arraybuffer";r.onload=function(){n.decodeAudioData(r.response,function(n){n&&(u[i]=n,c(t,n))},function(){t.on("loaderror")})};r.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,t.load())};try{r.send()}catch(f){r.onerror()}}},c=function(n,t){if(n._duration=t?t.duration:n._duration,Object.getOwnPropertyNames(n._sprite).length===0&&(n._sprite={_default:[0,n._duration*1e3]}),!n._loaded){n._loaded=!0;n.on("load")}n._autoplay&&n.play()},a=function(t,i,r){var f=t._nodeById(r);typeof u[t._src]!="undefined"&&(f.bufferSource=n.createBufferSource(),f.bufferSource.buffer=u[t._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=i[0],i[0]&&(f.bufferSource.loopStart=i[1],f.bufferSource.loopEnd=i[1]+i[2]),f.bufferSource.playbackRate.value=t._rate)};typeof define=="function"&&define.amd&&define(function(){return{Howler:t,Howl:o}});typeof exports!="undefined"&&(exports.Howler=t,exports.Howl=o);typeof window!="undefined"&&(window.Howler=t,window.Howl=o)})();